@using CMCS.Models
@model List<CMCS.Models.Claim>

@{
    var user = ViewData["User"] as Lecturer;
    var claims = ViewData["Claims"] as List<Claim>;
}

<div class="container mt-4">
    <!-- Welcome Section -->
    <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
            <h2 class="fw-bold">Welcome, @user?.FirstName!</h2>
            <p class="text-muted">Here are your recent claims:</p>
            <a asp-controller="Claims" asp-action="Create" class="btn btn-success btn-lg mt-2">
                <i class="bi bi-plus-circle"></i> Create New Claim
            </a>
        </div>
    </div>

    <!-- Upload Section -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h5 class="card-title">Upload Supporting Documents</h5>
            <form asp-action="SubmitClaim" asp-controller="Dashboard" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <input type="file" class="form-control" id="documentUpload" name="documents" multiple>
                    <div class="form-text">
                        You can upload multiple files (e.g., payslips, contracts). Maximum file size is 10MB per document.
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-upload"></i> Submit Claim
                </button>
            </form>
        </div>
    </div>

    <!-- Claims Table -->
    <div class="card shadow-sm">
        <div class="card-body">
            <h5 class="card-title">Your Claims</h5>

            @if (claims != null && claims.Any())
            {
                <table class="table table-striped table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>Status</th>
                            <th style="width: 200px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var claim in claims)
                        {
                            <tr>
                                <td>
                                    <span class="badge bg-info text-dark">@claim.Status.ToString()</span>
                                </td>
                                <td>
                                    <a asp-controller="Claims" asp-action="Edit" asp-route-id="@claim.ClaimId"
                                       class="btn btn-sm btn-outline-secondary me-2">
                                        <i class="bi bi-pencil"></i> Edit
                                    </a>
                                    <a asp-controller="Claims" asp-action="Details" asp-route-id="@claim.ClaimId"
                                       class="btn btn-sm btn-outline-info">
                                        <i class="bi bi-info-circle"></i> Details
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">You have no claims to display.</p>
            }
        </div>
    </div>
</div>
